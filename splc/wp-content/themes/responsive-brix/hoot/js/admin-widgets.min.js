!function(o){"use strict";o.fn.hootWidgetIconPicker=function(){return this.each(function(){var t=o(this),i=t.siblings(".hoot-of-icon-picker-box"),e=t.siblings(".hoot-of-icon-picked"),n=e.children("i"),r=i.find("i");e.on("click",function(){i.toggle()}),r.on("click",function(){var e=o(this).data("value");r.removeClass("selected");var d=o(this).hasClass("cmb-icon-none")?"":"selected";o(this).addClass(d),n.removeClass().addClass("fa "+d+" "+e),t.val(e),t.trigger("change"),i.toggle()})})},o(document).on("click",function(t){o(t.target).closest(".hoot-of-icon-picker-box").length||o(t.target).closest(".hoot-of-icon-picked").length||o(".hoot-of-icon-picker-box").hide()}),o.fn.hootWidgetImageUpload=function(){return this.each(function(){if("undefined"!=typeof wp&&wp.media&&wp.media.editor){var t=o(this),i=t.siblings(".hoot-of-image"),e=t.children(".hoot-of-image-selected-img"),n=t.siblings(".hoot-of-image-remove");n.on("click",function(o){o.preventDefault(),i.val(""),i.trigger("change"),e.css("background-image","none")}),t.on("click",function(o){var n=t.data("frame");return n?(n.open(),!1):(n=wp.media({title:t.data("title"),library:{type:t.data("library").split(",").map(function(o){return o.trim()})},button:{text:t.data("update"),close:!1}}),t.data("frame",n),n.on("select",function(){var o=n.state().get("selection").first().attributes;i.val(o.id),i.trigger("change");var t="";t="undefined"!=typeof o.sizes?"undefined"!=typeof o.sizes.thumbnail?o.sizes.thumbnail.url:o.sizes.full.url:o.icon,e.css("background-image","url("+t+")"),n.close()}),n.open(),!1)})}})},o.fn.hootWidgetCollapser=function(){return this.each(function(){var t=o(this),i=t.siblings(".hoot-collapse-body");t.on("click",function(){i.toggle()})})},o.fn.hootSetupWidget=function(){var t=function(t,n,r){t.find(".hoot-widget-field-group-add").each(function(){var t=o(this),r=t.siblings(".hoot-widget-field-group-items"),d=t.parent(".hoot-widget-field-group").data("id"),s=window.hoot_widget_helper[n][d];t.on("click",function(){var n=parseInt(o(this).data("iterator"));n++,o(this).data("iterator",n);var d=s.trim().replace(/975318642/g,n),c=o(d);i(c),e(c),c.find(".hoot-of-icon").hootWidgetIconPicker(),c.find(".hoot-of-image-selected").hootWidgetImageUpload(),c.find(".hoot-of-color").wpColorPicker(),r.append(c),t.closest(".hoot-widget-form").find("input").filter(":first").trigger("change")})}),t.find(".hoot-widget-field-group-top").click(function(){o(this).toggleClass("open"),o(this).is(".open")?o(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").show():o(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").hide()})},i=function(t){t.find(".hoot-widget-field-group-item-top").on("click",function(){o(this).siblings(".hoot-widget-field-group-item-form").toggle()})},e=function(t){t.find(".hoot-widget-field-group-remove").on("click",function(){o(this).closest(".hoot-widget-form").find("input").filter(":first").trigger("change"),o(this).closest(".hoot-widget-field-group-item").remove()})};return this.each(function(n,r){var d=o(r),s=d.data("class");if(o("body").hasClass("widgets-php")){if(d.data("hoot-form-setup")===!0)return!0;if(!d.is(":visible"))return!0}d.find(".hoot-of-icon").hootWidgetIconPicker(),d.find(".hoot-of-image-selected").hootWidgetImageUpload(),d.find(".hoot-of-color").wpColorPicker(),d.find(".hoot-collapse-head").hootWidgetCollapser(),t(d,s,!1),i(d),e(d),d.trigger("hootwidgetformsetup").data("hoot-form-setup",!0)})},o(".hoot-widget-form").hootSetupWidget(),o(".widgets-holder-wrap").on("click",".widget:has(.hoot-widget-form) .widget-top",function(){var t=o(this).closest(".widget").find(".hoot-widget-form");setTimeout(function(){t.hootSetupWidget()},200)})}(jQuery);